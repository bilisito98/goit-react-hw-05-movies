{"version":3,"file":"static/js/reviews.a27f9ce0.chunk.js","mappings":"mPACA,EAA0B,yBAA1B,EAAmE,+BAAnE,EAAgH,6BAAhH,EAAsJ,wBAAtJ,EAAuL,wBAAvL,EAAsN,sBAAtN,EAAmQ,sCAAnQ,EAAgU,sC,SCKjT,SAASA,IACpB,IAAQC,GAAYC,EAAAA,EAAAA,MAAZD,QACR,GAA8BE,EAAAA,EAAAA,UAAS,IAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KAEMC,EAAU,CACZC,KAAM,UACNC,MAAO,OACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,OAAQ,WAkBZ,OAbAC,EAAAA,EAAAA,YAAU,YACNC,EAAAA,EAAAA,IAAkBb,GACbc,MAAK,SAAAC,GACFX,EAAWW,EAAKC,QACnB,GACR,GAAE,CAAChB,KAQG,8BACFG,EAAQc,OAAS,GACX,eAAIC,UAAWC,EAAf,SACGhB,EAAQiB,KAAI,gBATHC,EASMC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,OAAQC,EAAf,EAAeA,QAASC,EAAxB,EAAwBA,eAAeC,EAAvC,EAAuCA,WAAvC,OACV,gBAAIR,UAAWC,EAAf,WACI,iBAAKD,UAAWC,EAAhB,UACKM,EAAeE,aACV,gBAAKC,KAbZP,EAa+BI,EAAeE,YAZ1DN,EAAOQ,SAAS,SACjBR,EAAOS,UAAU,GADhB,yCAEiCT,IAUuCU,IAAKR,EAAQL,UAAWC,KAC7E,gBAAKS,IAAI,+EAA+EG,IAAKR,EAAQL,UAAWC,KAEtH,4BACI,eAAID,UAAWC,EAAf,SAA0BI,KAC1B,cAAGL,UAAWC,EAAd,SAAuB,IAAIa,KAAKN,GAAYO,eAAe,QAAS5B,YAI5E,SAAC,IAAD,CACI6B,UAAW,IACXC,aAAc,mBACdC,aAAc,mBACdC,kBAAmBlB,EACnBmB,kBAAmBnB,EALvB,SAOKK,MAnB4BF,EAD3B,OAyBhB,qEAGb,C,yLCjEKiB,EAAW,+BACXC,EAAU,4CAAhB,SAEeC,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,UAAAA,CAAAA,SAAAA,IAAf,OAAeA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAf,2GAAsCC,EAAtC,+BAA4C,GAAIC,EAAhD,+BAAyD,CAAC,EAA1D,SAC2BC,MAAMF,EAAKC,GADtC,YACUE,EADV,QAEoBC,GAFpB,iCAGgBD,EAASE,OAHzB,gDAIUC,QAAQC,OAAO,IAAIC,MAAM,cAJnC,2GAOO,SAASC,IAA+B,IAAXC,EAAU,uDAAL,IAC/BC,EAAc,uBAKpB,OAAOZ,EAAuB,GAAD,OAAIF,GAAJ,OAAec,GAAf,OAA6Bb,EAA7B,iBAA6CY,GAC7E,CAEM,SAASE,EAAYC,GAA0B,IAAbH,EAAY,uDAAL,IACtCC,EAAc,gBACdG,EAAe,sCAKrB,OAAOf,EAAuB,GAAD,OAAIF,GAAJ,OAAec,GAAf,OAA6Bb,EAA7B,kBAA8Ce,EAA9C,iBAAkEH,GAAlE,OAAyEI,GACzG,CAEM,SAASC,EAAkBC,GAO9B,OAAOjB,EAAuB,GAAD,OAAIF,GAAJ,OANT,WAMS,OAA6BmB,GAA7B,OAAwClB,GAAxC,OALR,mBAMxB,CAEM,SAASmB,EAAkBD,GAO9B,OAAOjB,EAAuB,GAAD,OAAIF,GAAJ,OANT,WAMS,OAA6BmB,EAA7B,mBAAgDlB,GAAhD,OALR,mBAMxB,CAEM,SAAS3B,EAAkB6C,GAAuB,IAAbN,EAAY,uDAAL,IACzCC,EAAc,UACdG,EAAe,kBAKrB,OAAOf,EAAuB,GAAD,OAAIF,GAAJ,OAAec,GAAf,OAA6BK,EAA7B,mBAAgDlB,GAAhD,OAA0DgB,EAA1D,iBAA+EJ,GAC/G,C","sources":["webpack://react-homework-template/./src/components/MovieDetailsPage/Reviews/Reviews.module.css?1017","components/MovieDetailsPage/Reviews/Reviews.jsx","services/movies-api.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"reviews\":\"Reviews_reviews__c1EnG\",\"reviews__item\":\"Reviews_reviews__item__cYY4C\",\"author_info\":\"Reviews_author_info__aNV4-\",\"avatar\":\"Reviews_avatar__H0LyA\",\"author\":\"Reviews_author__ANsjv\",\"date\":\"Reviews_date__H5PJL\",\"read_more_less__more\":\"Reviews_read_more_less__more__UhOHF\",\"read_more_less__less\":\"Reviews_read_more_less__less__WeL9k\"};","import { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { fetchMovieReviews } from 'services/movies-api';\nimport ReactReadMoreReadLess from \"react-read-more-read-less\";\nimport s from './Reviews.module.css';\n\nexport default function Reviews() {\n    const { movieId } = useParams();\n    const [reviews, setReviews] = useState([]);\n\n    const options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric'\n    };\n\n    \n\n    useEffect(() => {\n        fetchMovieReviews(movieId)\n            .then(data => {\n                setReviews(data.results);\n            })\n    }, [movieId])\n\n    function avatarHandler(avatar) {\n        return avatar.includes(\"https\")\n            ? avatar.substring(1)\n            : `https://image.tmdb.org/t/p/w500${avatar}`\n    }\n\n    return <>\n        {reviews.length > 0\n            ? (<ul className={s.reviews}>\n                { reviews.map(({ id, author, content, author_details,created_at }) => (\n                    <li className={s.reviews__item} key={id}>\n                        <div className={s.author_info}>\n                            {author_details.avatar_path\n                                ? <img src={avatarHandler(author_details.avatar_path)} alt={author} className={s.avatar} />\n                                : <img src='https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg' alt={author} className={s.avatar} />\n                            }\n                            <div>\n                                <h4 className={s.author}>{author}</h4>\n                                <p className={s.date}>{new Date(created_at).toLocaleString(\"en-US\", options)}</p>\n                            </div>\n                        </div>\n\n                        <ReactReadMoreReadLess\n                            charLimit={300}\n                            readMoreText={\"Read more ▼\"}\n                            readLessText={\"Read less ▲\"}\n                            readMoreClassName={s.read_more_less__more}\n                            readLessClassName={s.read_more_less__less}\n                        >\n                            {content}\n                        </ReactReadMoreReadLess>\n                    </li>\n                ))}\n            </ul>)\n            : <p>We don't have any reviews for this movie</p>\n        }\n    </>\n}\n","const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '?api_key=387a2500e741e87c896db50117c25d75'\n\nasync function fetchWithErrorHandling(url = '', config = {}) {\n    const response = await fetch(url, config);\n    return response.ok\n        ? await response.json()\n        : Promise.reject(new Error('Not found'));\n}\n\nexport function fetchTrendingMovies(page=\"1\") {\n    const PATH_PARAMS = '/trending/movie/week';\n\n    // return fetch(`${BASE_URL}${PATH_PARAMS}${API_KEY}&page=${page}`)\n    //     .then(response => response.json())\n\n    return fetchWithErrorHandling(`${BASE_URL}${PATH_PARAMS}${API_KEY}&page=${page}`)\n}\n\nexport function fetchMovies(searchQuery, page = \"1\") {\n    const PATH_PARAMS = '/search/movie';\n    const searchParams = '&language=en-US&include_adult=false';\n\n    // return fetch(`${BASE_URL}${PATH_PARAMS}${API_KEY}&query=${searchQuery}&page=${page}${searchParams}`)\n    //     .then(response => response.json())\n\n    return fetchWithErrorHandling(`${BASE_URL}${PATH_PARAMS}${API_KEY}&query=${searchQuery}&page=${page}${searchParams}`)\n}\n\nexport function fetchMovieDetails(movie_id) {\n    const PATH_PARAMS = '/movie/';\n    const searchParams = '&language=en-US';\n\n    // return fetch(`${BASE_URL}${PATH_PARAMS}${movie_id}${API_KEY}${searchParams}`)\n    //     .then(response => response.json())\n\n    return fetchWithErrorHandling(`${BASE_URL}${PATH_PARAMS}${movie_id}${API_KEY}${searchParams}`)\n}\n\nexport function fetchMovieCredits(movie_id) {\n    const PATH_PARAMS = '/movie/';\n    const searchParams = '&language=en-US';\n\n    // return fetch(`${BASE_URL}${PATH_PARAMS}${movie_id}/credits${API_KEY}${searchParams}`)\n    //     .then(response => response.json())\n\n    return fetchWithErrorHandling(`${BASE_URL}${PATH_PARAMS}${movie_id}/credits${API_KEY}${searchParams}`)\n}\n\nexport function fetchMovieReviews(movie_id, page = \"1\") {\n    const PATH_PARAMS = '/movie/';\n    const searchParams = '&language=en-US';\n\n    // return fetch(`${BASE_URL}${PATH_PARAMS}${movie_id}/reviews${API_KEY}${searchParams}&page=${page}`)\n    //     .then(response => response.json())\n\n    return fetchWithErrorHandling(`${BASE_URL}${PATH_PARAMS}${movie_id}/reviews${API_KEY}${searchParams}&page=${page}`)\n}\n"],"names":["Reviews","movieId","useParams","useState","reviews","setReviews","options","year","month","day","hour","minute","second","useEffect","fetchMovieReviews","then","data","results","length","className","s","map","avatar","id","author","content","author_details","created_at","avatar_path","src","includes","substring","alt","Date","toLocaleString","charLimit","readMoreText","readLessText","readMoreClassName","readLessClassName","BASE_URL","API_KEY","fetchWithErrorHandling","url","config","fetch","response","ok","json","Promise","reject","Error","fetchTrendingMovies","page","PATH_PARAMS","fetchMovies","searchQuery","searchParams","fetchMovieDetails","movie_id","fetchMovieCredits"],"sourceRoot":""}